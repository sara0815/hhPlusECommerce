## 부하테스트
### 부하테스트 대상 (step19)
- 선착순 쿠폰 발급
  - 선정 목적 : 한번에 많은 사용자가 몰릴 경우에 대해 peak test 를 하게 되었다.
  - 시나리오 : 1000명의 가상 유저를 5초간 빠르게 증가 시킨 후 10초간 1000명의 가상의 유저를 유지시키고 5초간 감소시킨다.
![스크린샷 2025-09-11 203856.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-11%20203856.png)
![스크린샷 2025-09-12 031414.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-12%20031414.png)
![스크린샷 2025-09-12 045107.png](%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-09-12%20045107.png)

### 병목 탐색
- 실패 건수도 있고 성능이 좋지 않은 것을 확인할 수 있다. (최대 4.15s 소요)
- 카프카 컨슈머 렉에 많이 쌓여있는 것을 확인할 수 있었다. 

### 개선
- 카프카로 쿠폰 발급을 발행하기 전에 레디스를 사용하여 쿠폰 발행 가능한 수량만큼만 카프카로 발행시키고 나머지는 쿠폰 발급 실패로 리턴하는것이 병목을 줄일 수 있을 것으로 보인다.