### 베스트 상품 redis 적용
레디스의 sorted set 을 이용하여 구매 순으로 정렬 되도록 저장하였습니다.
주문 시점에 주문 날짜별로 key를 생성하였습니다. (ex product:rank:2025-08-21)
매일 스케줄을 돌려 3일간의 랭킹 합산을 만들어 sorted set 에 저장하였고,
베스트 상품을 불러올 때 합산된 sorted set 을 불러 3일간의 베스트 상품 정보를 불러올 수 있었습니다.

### 선착순 쿠폰 발급
레디스의 sorted set 을 활용하여 쿠폰 발급 요청이 들어올 때 ms 단위까지 score에 저장하여 요청 순으로 정렬 되도록 저장하였습니다. (ex coupon:1)
스케줄로 초 단위로 요청을 확인하여 아직 발급되지 않은 쿠폰을 발급해주었습니다.
발급 받은 userCoupon의 경우 userId별로 hashMap을 이용하여 저장하였습니다. (ex userCoupon:1)

### 회고
베스트 상품 조회 시 sorted set을 사용하여 주문 score을 저장하는 경우 3일간이라는 조건을 만족시키기 위해 하루 단위로 키를 생성하여 3일치를 합하는 방식을 채택하였습니다.
list형태로의 저장도 생각해봤지만 sorted set을 그대로 이용하는 것이 확장성에 용이하여 sorted set으로 3일치 key를 만들었습니다.

선착순 쿠폰의 경우 처음엔 스케줄을 이용하지 않고 jpa에서 발급 할 수 있는 쿠폰 수량을 확인하는 로직을 포함시켰지만, 
트래픽이 많아지는 경우 mysql에 접근으로 인해 성능 저하 또는 서버 다운 이슈가 생길 수 있어 
쿠폰 발급 요청 시 jpa와 연결하는 부분을 모두 뺐습니다. 
